(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7767:function(e,t,r){Promise.resolve().then(r.bind(r,752))},752:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(7437),i={src:"/_next/static/media/terrain.efb0f998.png",height:1920,width:3360,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAALVBMVEVp5tN9xpOPv2xw3sNs2LSYtFtl69yPs2Rxy4R62L9zxV2EzKds26J/uFJ0zKDh5o4JAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAK0lEQVR4nB3GyREAIAgAsUVQwKv/ch18JQyNnQqIn7kS6K3Z4MejRORa5QEQuQCarcXxGQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5},u={src:"/_next/static/media/foreground.a6e61299.png",height:1920,width:3368,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAADFBMVEVonF9snWVhnmaEjmoKcUBqAAAABHRSTlMBIjQV5hGEbQAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABlJREFUeJxjYIABZkZGCIMRxmBiZoKyoAAAAaIAEXwR004AAAAASUVORK5CYII=",blurWidth:8,blurHeight:5},A=r(2265),a=r(1326);function c(e){let t=(0,A.useRef)(),r=(0,A.useRef)(),n=(0,A.useRef)(!1),i=(0,A.useCallback)(u=>{if(n.current){t.current&&cancelAnimationFrame(t.current);return}r.current||(r.current=u);try{e(u-r.current)}catch(e){console.error(e)}r.current=u,t.current=requestAnimationFrame(i)},[e]);return(0,A.useEffect)(()=>(n.current||(t.current=requestAnimationFrame(i)),()=>{t.current&&cancelAnimationFrame(t.current)}),[i]),Object.freeze({stop:()=>{n.current=!0}})}function o(e){let{initialFrame:t,frameSize:r,image:i,animation:u,sx:o}=e,[l,s]=(0,A.useState)({x:0,y:0}),[h,d]=(0,A.useState)({x:r.width*l.x,y:r.height*l.y}),g=(0,A.useRef)(0);return(0,A.useEffect)(()=>{d({x:r.width*l.x,y:r.height*l.y})},[l,r]),(0,A.useEffect)(()=>{if(u&&!u.enabled&&u.resetWhenDisable){var e,r;s({x:null!==(e=null==t?void 0:t.x)&&void 0!==e?e:0,y:null!==(r=null==t?void 0:t.y)&&void 0!==r?r:0})}},[u,t]),c(e=>{var t;if(!(null==u?void 0:u.enabled))return;g.current+=e;let n=null!==(t=u.delay)&&void 0!==t?t:180;if(g.current>=n){g.current%=n;let e={x:Math.floor(i.width/r.width),y:Math.floor(i.height/r.height)},t={x:l.x+1,y:l.y};if(t.x>=e.x&&(t.x=0,t.y++,t.y>=e.y)){if(!u.loop)return;t.x=0,t.y=0}s({x:t.x,y:t.y}),d({x:r.width*t.x,y:r.height*t.y})}}),(0,n.jsx)(a.Z,{sx:{...null!=o?o:{},display:"inline-block",background:"url(".concat(i.src,")"),backgroundRepeat:"no-repeat",width:r.width,height:r.height,backgroundPosition:"-".concat(h.x,"px -").concat(h.y,"px")}})}var l={src:"/_next/static/media/down.1079eea5.png",height:68,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAYAAACuyE5IAAAAaklEQVR4nA2MuQ2DUBAF9+2uL9kOHLkj1+Ii3IYDWkAiogsyOkDEECHEIfbB14QzGhTfTxMRnag5dpICUWFC42zyRpX91mlaenclg08zTX3SCoGZoc7/pXBrYf7g6aaYh1HShZf71fftdQCA/CjVxQOVhQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:3},s={src:"/_next/static/media/up.21af53ab.png",height:68,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAYAAACuyE5IAAAAY0lEQVR4nC3JsQ2DQBAEwN33IduyHThyQW4GaqARWiBDogq6QMSQgYTQ/y0fMOmwq/5jTJgZaJAcFwmpMP7Y1uUh98VzWuBHQMoPQogKNw5t0zPFiWZvL56B+7rlh+6vBz1+T+YwJ4BB96MjAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3},h={src:"/_next/static/media/left.b77c2c63.png",height:68,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAYAAACuyE5IAAAAbklEQVR4nAFjAJz/Aa9tTNj//fvr/gEDAQP//QP9AQX+A//7A/0BBfgFAfwdAcWTd9Pm5+7qGRgQA+fp8gEZFgz65+rzCBgUC/fq7vckAcuchHz+CA7iA/z4D/wIDvgE8uj7/AwVAwDp3QQBDhYa14YwJeRsiBwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},d={src:"/_next/static/media/right.0100111b.png",height:68,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAYAAACuyE5IAAAAbklEQVR4nAFjAJz/AbFsSN37/wPkA//9CP0AAvoDAP0E/QEE/gL//v8BAwMTAa1+ad4XEgrY5+ryCBkYEQTn6O8AGRcP+ubm7v0bGxQhAcmlk3sE9e3h+w4YAQP48xj+AwbvA/nz/P0BBPf/9vE8CLUwUZOiXEsAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3};function g(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.assign({},...t)}var x={world:{width:"100%",height:"100%",background:"#67E6D2",position:"relative"},worldBackground:{top:0,left:0,zIndex:0,position:"absolute",background:"transparent"},uiContainer:{width:"100%",height:"100%",position:"absolute",top:0,left:0,background:"transparent",color:"transparent",border:"none",outline:"none",zIndex:3},playerTexture:{position:"absolute",zIndex:1}};function f(e){let{setPlayerPosition:t,worldSize:r,friction:i,maxSpeed:u,customAccel:a,isMobile:f}=e,[y,b]=(0,A.useState)(l),[w,p]=(0,A.useState)(!1),E=(0,A.useRef)({x:0,y:0}),m=(0,A.useRef)({x:0,y:0});return(0,A.useEffect)(()=>{a&&(E.current.x=a.x,E.current.y=a.y,0!==E.current.x&&0!==E.current.y&&(E.current.x/=Math.sqrt(2),E.current.y/=Math.sqrt(2)))},[a]),!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,A.useMemo)(()=>"string"==typeof t?[t]:t,[t]),n=(0,A.useRef)([]),i=(0,A.useCallback)(t=>{(!(r.length>0)||r.includes(t.key))&&(n.current.includes(t.key)||n.current.push(t.key),e(Object.freeze([...n.current])))},[e,r]),u=(0,A.useCallback)(t=>{(!(r.length>0)||r.includes(t.key))&&(n.current.includes(t.key)&&n.current.splice(n.current.indexOf(t.key),1),e(Object.freeze([...n.current])))},[e,r]);(0,A.useEffect)(()=>(addEventListener("keydown",i),addEventListener("keyup",u),()=>{removeEventListener("keydown",i),removeEventListener("keyup",u)}),[i,u])}(e=>{f||(E.current.x=0,E.current.y=0,e.includes("a")&&(E.current.x=-1),e.includes("d")&&(E.current.x=1),e.includes("w")&&(E.current.y=-1),e.includes("s")&&(E.current.y=1),0!==E.current.x&&0!==E.current.y&&(E.current.x/=Math.sqrt(2),E.current.y/=Math.sqrt(2)))},["w","a","s","d"]),c(e=>{let r=0!==E.current.x||0!==E.current.y;r!==w&&p(r);let n=e/1e3,A=null!=u?u:1500,a=null!=i?i:.85;m.current.x+=E.current.x*n*A,m.current.y+=E.current.y*n*A,m.current.x*=Math.pow(a,60*n),m.current.y*=Math.pow(a,60*n);let c=Math.sqrt(m.current.x**2+m.current.y**2);if(c>A){let e=A/c;m.current.x*=e,m.current.y*=e}(0!==m.current.x||0!==m.current.y)&&(t(e=>({x:e.x+m.current.x*n,y:e.y+m.current.y*n})),Math.abs(m.current.x)>Math.abs(m.current.y)?m.current.x>0?b(d):b(h):m.current.y>0?b(l):b(s))}),(0,n.jsx)(o,{frameSize:{width:y.width/4,height:y.height},image:y,animation:{enabled:w,loop:!0,resetWhenDisable:!0},sx:g(x.playerTexture,{left:r.width/2,top:r.height/2})})}function y(e){let{background:t,foreground:r,children:i,worldPosition:u,worldRef:A}=e;return(0,n.jsxs)(a.Z,{sx:x.world,ref:A,children:[(0,n.jsx)(a.Z,{sx:g(x.worldBackground,{width:x.world.width,height:x.world.height,backgroundImage:"url(".concat(t.src,")"),backgroundPosition:"".concat(u.x,"px ").concat(u.y,"px"),backgroundRepeat:"no-repeat"})}),i,r&&(0,n.jsx)(a.Z,{sx:g(x.worldBackground,{left:-10,zIndex:2,width:x.world.width,height:x.world.height,backgroundImage:"url(".concat(r.src,")"),backgroundPosition:"".concat(u.x,"px ").concat(u.y,"px"),backgroundRepeat:"no-repeat",opacity:.55})})]})}var b=r(2804),w=r(511),p={position:"relative",border:"2px solid rgba(0,0,0,0.8)",borderRadius:"50%",touchAction:"none"},E={position:"absolute",width:"60px",height:"60px",background:"rgba(0,0,0,0.65)",borderRadius:"50%",touchAction:"none"};function m(e){let{radius:t,sx:r,knobSx:i,onAxisChange:u}=e,[c,o]=(0,A.useState)({x:t,y:t});return(0,n.jsx)(a.Z,{id:"joystick",sx:g(p,{width:2*t,height:2*t},null!=r?r:{}),onTouchMove:e=>{var r;let n=e.target.parentElement;if((null==n?void 0:n.id)!=="joystick")return;let i=e.touches[0],A=null!==(r=null==n?void 0:n.getBoundingClientRect())&&void 0!==r?r:{left:0,top:0},a=i.clientX-A.left,c=i.clientY-A.top,l=a-t,s=c-t;if(Math.sqrt(l*l+s*s)<t)o({x:a,y:c});else{let e=Math.atan2(s,l);o({x:t+t*Math.cos(e),y:t+t*Math.sin(e)})}let h=l/t,d=s/t;null==u||u(Object.freeze({x:h>.5?1:h<-.5?-1:0,y:d>.5?1:d<-.5?-1:0}))},onTouchEnd:()=>{o({x:t,y:t}),null==u||u(Object.freeze({x:0,y:0}))},children:(0,n.jsx)(a.Z,{sx:g(E,{width:t,height:t,top:c.y-t/2,left:c.x-t/2},null!=i?i:{})})})}var k=r(2588);function v(){let e=(0,b.Z)("only screen and (max-width: 480px)"),t=(0,b.Z)("only screen and (max-height: 600px)"),r=(0,A.useRef)(),[c,o]=(0,A.useState)({x:0,y:0}),[l,s]=(0,A.useState)({x:540,y:820}),[h,d]=(0,A.useState)({x:0,y:0}),[g,p]=(0,A.useState)({width:0,height:0}),[E,v]=(0,A.useState)(!1);return((0,A.useEffect)(()=>{0!==g.width&&0!==g.height&&d({x:g.width/2-l.x,y:g.height/2-l.y})},[g,l]),(0,A.useEffect)(()=>{let e=()=>{var e,t,n,i;if(!r.current)return;let u=getComputedStyle(r.current);p({width:Number(null!==(n=null===(e=u.width.match(/[0-9\.]+/))||void 0===e?void 0:e[0])&&void 0!==n?n:0),height:Number(null!==(i=null===(t=u.height.match(/[0-9\.]+/))||void 0===t?void 0:t[0])&&void 0!==i?i:0)})};return e(),addEventListener("resize",e),()=>{removeEventListener("resize",e)}},[]),(0,A.useEffect)(()=>{t&&r.current&&document.fullscreenElement!==r.current&&E&&(r.current.requestFullscreen(),v(!1))},[E,t]),e)?(0,n.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",placeItems:"center",textAlign:"center",width:"100%",height:"100%",gap:2},children:[(0,n.jsx)(w.Z,{component:"h3",fontWeight:700,children:"Vire sua tela, \xe9 recomendado jogar no modo paisagem para uma experi\xeancia melhor."}),(0,n.jsx)(k.Z,{htmlColor:"white",fontSize:"large"})]}):(0,n.jsxs)(y,{background:i,foreground:u,worldPosition:h,worldRef:r,children:[(0,n.jsx)(f,{isMobile:t,setPlayerPosition:s,worldSize:g,customAccel:t?c:void 0}),(0,n.jsx)(a.Z,{sx:x.uiContainer,onClick:()=>{t&&!E&&v(!0)},children:t&&(0,n.jsx)(m,{radius:60,sx:{position:"absolute",bottom:50,left:50},onAxisChange:e=>o(e)})})]})}}},function(e){e.O(0,[451,971,23,744],function(){return e(e.s=7767)}),_N_E=e.O()}]);