(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7767:function(e,t,A){Promise.resolve().then(A.bind(A,752))},752:function(e,t,A){"use strict";A.r(t),A.d(t,{default:function(){return E}});var r=A(7437),n={src:"/grimtest/_next/static/media/terrain.efb0f998.png",height:1920,width:3360,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAALVBMVEVp5tN9xpOPv2xw3sNs2LSYtFtl69yPs2Rxy4R62L9zxV2EzKds26J/uFJ0zKDh5o4JAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAK0lEQVR4nB3GyREAIAgAsUVQwKv/ch18JQyNnQqIn7kS6K3Z4MejRORa5QEQuQCarcXxGQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5},i={src:"/grimtest/_next/static/media/foreground.a6e61299.png",height:1920,width:3368,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAADFBMVEVonF9snWVhnmaEjmoKcUBqAAAABHRSTlMBIjQV5hGEbQAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABlJREFUeJxjYIABZkZGCIMRxmBiZoKyoAAAAaIAEXwR004AAAAASUVORK5CYII=",blurWidth:8,blurHeight:5},u=A(2265),a=A(1326);function c(e){let t=(0,u.useRef)(),A=(0,u.useRef)(),r=(0,u.useRef)(!1),n=(0,u.useCallback)(i=>{if(r.current){t.current&&cancelAnimationFrame(t.current);return}A.current||(A.current=i);try{e(i-A.current)}catch(e){console.error(e)}A.current=i,t.current=requestAnimationFrame(n)},[e]);return(0,u.useEffect)(()=>(r.current||(t.current=requestAnimationFrame(n)),()=>{t.current&&cancelAnimationFrame(t.current)}),[n]),Object.freeze({stop:()=>{r.current=!0}})}function o(e){let{initialFrame:t,frameSize:A,image:n,animation:i,sx:o}=e,[l,s]=(0,u.useState)({x:0,y:0}),[w,M]=(0,u.useState)({x:A.width*l.x,y:A.height*l.y}),h=(0,u.useRef)(0);return(0,u.useEffect)(()=>{M({x:A.width*l.x,y:A.height*l.y})},[l,A]),(0,u.useEffect)(()=>{if(i&&!i.enabled&&i.resetWhenDisable){var e,A;s({x:null!==(e=null==t?void 0:t.x)&&void 0!==e?e:0,y:null!==(A=null==t?void 0:t.y)&&void 0!==A?A:0})}},[i,t]),c(e=>{var t;if(!(null==i?void 0:i.enabled))return;h.current+=e;let r=null!==(t=i.delay)&&void 0!==t?t:180;if(h.current>=r){h.current%=r;let e={x:Math.floor(n.width/A.width),y:Math.floor(n.height/A.height)},t={x:l.x+1,y:l.y};if(t.x>=e.x&&(t.x=0,t.y++,t.y>=e.y)){if(!i.loop)return;t.x=0,t.y=0}s({x:t.x,y:t.y}),M({x:A.width*t.x,y:A.height*t.y})}}),(0,r.jsx)(a.Z,{sx:{...null!=o?o:{},display:"inline-block",background:"url(".concat(n.src,")"),backgroundRepeat:"no-repeat",width:A.width,height:A.height,backgroundPosition:"-".concat(w.x,"px -").concat(w.y,"px")}})}var l={src:"/grimtest/_next/static/media/down.1079eea5.png",height:68,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAIVBMVEXGj3DOpIqnZkfMnoKwa0ujY0a+hmiraUrPqI7PmnnOnoLF4sDmAAAAC3RSTlPpm8WB6rXg1rPziTM7GDYAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAhSURBVHicBcEHAQAACMOwjg/+BZMQ2WadwRZALePSyecBBXMAZmg04IsAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},s={src:"/grimtest/_next/static/media/up.21af53ab.png",height:68,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAHlBMVEWrdFusdFzJnoWtbU/HpZGxbEqkZEbIo42pZkfIqZU/rhVUAAAACnRSTlPn8YTXqOq1mMW2RA5B/QAAAAlwSFlzAAALEwAACxMBAJqcGAAAACFJREFUeJwFwYcNAAAMwrAA6vr/4dpUZzddKAgQ5xmP7wEFHwBgjw6umAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:3},w={src:"/grimtest/_next/static/media/left.b77c2c63.png",height:68,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAMFBMVEWma1C9hmiraUrHlnqoZ0rInH/Fj2/IlnmwemCxbUzGjm6vbEvAhGPDimmua0urdV0ixOoaAAAAEHRSTlOo48Nds3VJkdDiyOCisc664gvzlgAAAAlwSFlzAAALEwAACxMBAJqcGAAAACNJREFUeJxj4GZhYmLhY+BkYGTg4ufl4GFkYGdjZWZmZWMHAAfxAJXwToLkAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3},M={src:"/grimtest/_next/static/media/right.0100111b.png",height:68,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAALVBMVEWmaEzJmn6/h2mtakqpaEmwbEvIlnqrdVu/hWSveWDBi3DEjWzEl3zGjWvMkW0kuHblAAAAD3RSTlOobeXMuuCUvZ3LQsVgtkHOHEMTAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxXRFWHRSYXcACmV4aWYKICAgICAyMTQKNDU3ODY5NjYwMDAwNDk0OTJhMDAwODAwMDAwMDBhMDAwMDAxMDQwMDAxMDAwMDAwYzAwMDAwMDAwMTAxMDQwMDAxMDAwMDAwCjQ0MDAwMDAwMDIwMTAzMDAwMzAwMDAwMDg2MDAwMDAwMTIwMTAzMDAwMTAwMDAwMDAxMDAwMDAwMWEwMTA1MDAwMTAwMDAwMAo4YzAwMDAwMDFiMDEwNTAwMDEwMDAwMDA5NDAwMDAwMDI4MDEwMzAwMDEwMDAwMDAwMjAwMDAwMDMxMDEwMjAwMGQwMDAwMDAKOWMwMDAwMDAzMjAxMDIwMDE0MDAwMDAwYWEwMDAwMDA2OTg3MDQwMDAxMDAwMDAwYmUwMDAwMDAwMDAwMDAwMDA4MDAwODAwCjA4MDA0ODAwMDAwMDAxMDAwMDAwNDgwMDAwMDAwMTAwMDAwMDQ3NDk0ZDUwMjAzMjJlMzEzMDJlMzMzNjAwMDAzMjMwMzIzNAozYTMwMzYzYTMyMzUyMDMxMzQzYTMwMzgzYTMyMzEwMDAxMDAwMWEwMDMwMDAxMDAwMDAwMDEwMDAwMDAwMDAwMDAwMAqRHJGOAAAAI0lEQVR4nGNgZWBmYWFmYGVg4uDkZedmYGJg42Jk5GHkYwMABd8AgJHHnK8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:3};function h(){for(var e=arguments.length,t=Array(e),A=0;A<e;A++)t[A]=arguments[A];return Object.assign({},...t)}var d={world:{width:"100%",height:"100%",background:"#67E6D2",position:"relative"},worldBackground:{top:0,left:0,zIndex:0,position:"absolute",background:"transparent"},uiContainer:{width:"100%",height:"100%",position:"absolute",top:0,left:0,background:"transparent",color:"transparent",border:"none",outline:"none",zIndex:3},playerTexture:{position:"absolute",zIndex:1}};function g(e){let{setPlayerPosition:t,worldSize:A,friction:n,maxSpeed:i,customAccel:a,isMobile:g}=e,[x,D]=(0,u.useState)(l),[y,m]=(0,u.useState)(!1),b=(0,u.useRef)({x:0,y:0}),f=(0,u.useRef)({x:0,y:0});return(0,u.useEffect)(()=>{a&&(b.current.x=a.x,b.current.y=a.y,0!==b.current.x&&0!==b.current.y&&(b.current.x/=Math.sqrt(2),b.current.y/=Math.sqrt(2)))},[a]),!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],A=(0,u.useMemo)(()=>"string"==typeof t?[t]:t,[t]),r=(0,u.useRef)([]),n=(0,u.useCallback)(t=>{(!(A.length>0)||A.includes(t.key))&&(r.current.includes(t.key)||r.current.push(t.key),e(Object.freeze([...r.current])))},[e,A]),i=(0,u.useCallback)(t=>{(!(A.length>0)||A.includes(t.key))&&(r.current.includes(t.key)&&r.current.splice(r.current.indexOf(t.key),1),e(Object.freeze([...r.current])))},[e,A]);(0,u.useEffect)(()=>(addEventListener("keydown",n),addEventListener("keyup",i),()=>{removeEventListener("keydown",n),removeEventListener("keyup",i)}),[n,i])}(e=>{g||(b.current.x=0,b.current.y=0,e.includes("a")&&(b.current.x=-1),e.includes("d")&&(b.current.x=1),e.includes("w")&&(b.current.y=-1),e.includes("s")&&(b.current.y=1),0!==b.current.x&&0!==b.current.y&&(b.current.x/=Math.sqrt(2),b.current.y/=Math.sqrt(2)))},["w","a","s","d"]),c(e=>{let A=0!==b.current.x||0!==b.current.y;A!==y&&m(A);let r=e/1e3,u=null!=i?i:1500,a=null!=n?n:.85;f.current.x+=b.current.x*r*u,f.current.y+=b.current.y*r*u,f.current.x*=Math.pow(a,60*r),f.current.y*=Math.pow(a,60*r);let c=Math.sqrt(f.current.x**2+f.current.y**2);if(c>u){let e=u/c;f.current.x*=e,f.current.y*=e}(0!==f.current.x||0!==f.current.y)&&(t(e=>({x:e.x+f.current.x*r,y:e.y+f.current.y*r})),Math.abs(f.current.x)>Math.abs(f.current.y)?f.current.x>0?D(M):D(w):f.current.y>0?D(l):D(s))}),(0,r.jsx)(o,{frameSize:{width:x.width/4,height:x.height},image:x,animation:{enabled:y,loop:!0,resetWhenDisable:!0},sx:h(d.playerTexture,{left:A.width/2,top:A.height/2})})}function x(e){let{background:t,foreground:A,children:n,worldPosition:i,worldRef:u}=e;return(0,r.jsxs)(a.Z,{sx:d.world,ref:u,children:[(0,r.jsx)(a.Z,{sx:h(d.worldBackground,{width:d.world.width,height:d.world.height,backgroundImage:"url(".concat(t.src,")"),backgroundPosition:"".concat(i.x,"px ").concat(i.y,"px"),backgroundRepeat:"no-repeat"})}),n,A&&(0,r.jsx)(a.Z,{sx:h(d.worldBackground,{left:-10,zIndex:2,width:d.world.width,height:d.world.height,backgroundImage:"url(".concat(A.src,")"),backgroundPosition:"".concat(i.x,"px ").concat(i.y,"px"),backgroundRepeat:"no-repeat",opacity:.55})})]})}var D=A(2804),y=A(511),m={position:"relative",border:"2px solid rgba(0,0,0,0.8)",borderRadius:"50%",touchAction:"none"},b={position:"absolute",width:"60px",height:"60px",background:"rgba(0,0,0,0.65)",borderRadius:"50%",touchAction:"none"};function f(e){let{radius:t,sx:A,knobSx:n,onAxisChange:i}=e,[c,o]=(0,u.useState)({x:t,y:t});return(0,r.jsx)(a.Z,{id:"joystick",sx:h(m,{width:2*t,height:2*t},null!=A?A:{}),onTouchMove:e=>{var A;let r=e.target.parentElement;if((null==r?void 0:r.id)!=="joystick")return;let n=e.touches[0],u=null!==(A=null==r?void 0:r.getBoundingClientRect())&&void 0!==A?A:{left:0,top:0},a=n.clientX-u.left,c=n.clientY-u.top,l=a-t,s=c-t;if(Math.sqrt(l*l+s*s)<t)o({x:a,y:c});else{let e=Math.atan2(s,l);o({x:t+t*Math.cos(e),y:t+t*Math.sin(e)})}let w=l/t,M=s/t;null==i||i(Object.freeze({x:w>.5?1:w<-.5?-1:0,y:M>.5?1:M<-.5?-1:0}))},onTouchEnd:()=>{o({x:t,y:t}),null==i||i(Object.freeze({x:0,y:0}))},children:(0,r.jsx)(a.Z,{sx:h(b,{width:t,height:t,top:c.y-t/2,left:c.x-t/2},null!=n?n:{})})})}var p=A(2588);function E(){let e=(0,D.Z)("only screen and (max-width: 480px)"),t=(0,D.Z)("only screen and (max-height: 600px)"),A=(0,u.useRef)(),[c,o]=(0,u.useState)({x:0,y:0}),[l,s]=(0,u.useState)({x:540,y:820}),[w,M]=(0,u.useState)({x:0,y:0}),[h,m]=(0,u.useState)({width:0,height:0}),[b,E]=(0,u.useState)(!1);return((0,u.useEffect)(()=>{0!==h.width&&0!==h.height&&M({x:h.width/2-l.x,y:h.height/2-l.y})},[h,l]),(0,u.useEffect)(()=>{let e=()=>{var e,t,r,n;if(!A.current)return;let i=getComputedStyle(A.current);m({width:Number(null!==(r=null===(e=i.width.match(/[0-9\.]+/))||void 0===e?void 0:e[0])&&void 0!==r?r:0),height:Number(null!==(n=null===(t=i.height.match(/[0-9\.]+/))||void 0===t?void 0:t[0])&&void 0!==n?n:0)})};return e(),addEventListener("resize",e),()=>{removeEventListener("resize",e)}},[]),(0,u.useEffect)(()=>{t&&A.current&&document.fullscreenElement!==A.current&&b&&(A.current.requestFullscreen(),E(!1))},[b,t]),e)?(0,r.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",placeItems:"center",textAlign:"center",width:"100%",height:"100%",gap:2},children:[(0,r.jsx)(y.Z,{component:"h3",fontWeight:700,children:"Vire sua tela, \xe9 recomendado jogar no modo paisagem para uma experi\xeancia melhor."}),(0,r.jsx)(p.Z,{htmlColor:"white",fontSize:"large"})]}):(0,r.jsxs)(x,{background:n,foreground:i,worldPosition:w,worldRef:A,children:[(0,r.jsx)(g,{isMobile:t,setPlayerPosition:s,worldSize:h,customAccel:t?c:void 0}),(0,r.jsx)(a.Z,{sx:d.uiContainer,onClick:()=>{t&&!b&&E(!0)},children:t&&(0,r.jsx)(f,{radius:60,sx:{position:"absolute",bottom:50,left:50},onAxisChange:e=>o(e)})})]})}}},function(e){e.O(0,[451,971,23,744],function(){return e(e.s=7767)}),_N_E=e.O()}]);